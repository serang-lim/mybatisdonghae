<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="treview">
<!-- 네임스페이스는 테이블 보통 테이블이름으로 설정함 -->

	<select id="list" resultType="TreviewDTO">
		<![CDATA[
	      SELECT rreadcnt, rnum, rsubject, rregion, rid, rdate
	      FROM review
	      ORDER BY rnum DESC
	      ]]>
	</select>
	
	<select id="read" resultType="TreviewDTO">
		<![CDATA[
	      SELECT rnum, rsubject, rcontent, rregion, rid, rdate, rreadcnt, rphoto_name
	      FROM review
	      WHERE rnum=#{rnum}
	      ]]>
	</select>
	
	<insert id="insert">
		<![CDATA[
	      INSERT INTO review (rnum, rsubject, rcontent, rpasswd, rphoto_name, rregion, rid, rdate)
	      VALUES (rnum_seq.nextval, #{rsubject}, #{rcontent}, #{rpasswd}, #{rphoto_name}, #{rregion}, #{rid}, sysdate)
	      ]]>
	</insert>
	
	<update id="update">
		<![CDATA[
         UPDATE review SET rsubject=#{rsubject}, scontent=#{scontent}, sphoto_name=#{sphoto_name}, sregion=#{sregion}, spasswd=#{spasswd}
         WHERE rnum=#{rnum}
         ]]>
	</update>
	
	   <delete id="delete">
      <![CDATA[
         DELETE FROM review
         WHERE rnum=#{rnum}
      ]]>
   </delete>
   
    <!-- 조회수 증가 -->
    <update id="increaseCnt">
      <![CDATA[    
        update review set
            rreadcnt = rreadcnt + 1 
        where
            rnum = #{rnum}
      ]]>      
    </update>   
    
</mapper>
